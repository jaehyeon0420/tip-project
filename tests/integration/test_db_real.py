import pytest
import os
from decimal import Decimal
from src.tools.vector_store import VectorStore

@pytest.mark.asyncio
async def test_search_similar_trademarks_real():
    """실제 DB에서 유사 상표 검색"""
    
    # DB 연결 정보 확인
    if not os.getenv("DB_URL"):
        pytest.skip("DB_URL이 설정되지 않아 테스트를 건너뜁니다.")
        
    try:
        store = VectorStore()
        results = await store.search_similar_trademarks()

        assert isinstance(results, list)
        
        # DB에 데이터가 있다면 결과가 반환되어야 함
        if results:
            item = results[0]
            assert "protection_trademark" in item
            assert "collected_trademarks" in item
            assert isinstance(item["collected_trademarks"], list)
            
    except Exception as e:
        pytest.fail(f"DB 연결 또는 쿼리 실행 실패: {e}")

@pytest.mark.asyncio
async def test_search_precedents_real():
    """실제 DB에서 판례 벡터 검색 (search_precedents)"""
    
    if not os.getenv("DB_URL"):
        pytest.skip("DB_URL이 설정되지 않아 테스트를 건너뜁니다.")
        
    try:
        store = VectorStore()
        # 쿼리 실행 자체만 테스트
        results = await store.search_precedents(query_vec=[-0.008160843,-0.025559593,-0.018392965,0.028473195,0.0019349206,-0.021555118,-0.026194787,0.011799391,-0.014609427,-0.016501196,0.021762246,0.013794724,0.02257695,-0.022369822,-0.03460418,0.034300394,-0.0036420005,0.017288283,-0.00559936,-0.011965093,0.0025235093,-0.0061033713,0.040320914,-0.0038146072,0.022521716,0.01072923,0.0105497185,0.014319448,-0.0028428317,0.0190972,0.010418538,0.027520405,0.008471535,-0.008022757,-0.02464823,-0.031621538,0.025090104,-0.0076292143,-0.0072287666,-0.0016155983,-0.011074443,-0.011695827,-0.0045706243,0.0070665167,-0.0039595966,-0.0051436783,0.0032242923,-0.025573403,-0.009010067,0.001815822,-0.021817481,0.009804058,0.036261205,-0.054129448,0.037807763,-0.01862771,-0.032698605,0.015382705,-0.04534722,-0.016390728,-0.046424285,0.010777559,-0.0117924865,0.00818846,-0.011971998,-0.0052817636,-0.021596545,-0.009417419,-0.0016268177,-0.0011193542,-0.014719895,-0.011557742,0.027409937,-0.027810384,-0.0023181073,-0.02626383,0.03612312,0.0013868945,0.039713338,-0.040873256,0.018959114,-0.008402492,0.019718584,-0.010508293,-0.047252797,0.036730696,0.0047570392,-0.062966906,0.020823266,0.0020919926,0.0149546405,-0.030323537,0.015092726,-0.006987117,0.017205432,-0.021707013,0.0046016932,0.0011547385,0.007284001,0.038332485,-0.00029364708,0.011557742,-0.021789864,0.022052227,0.018807221,0.020174265,-0.011916763,0.028279874,0.0021852003,0.057830133,0.0072701923,0.024082081,-0.024952019,-0.0042979056,-0.012869552,0.009790249,-0.05711209,0.03388614,0.08854031,-0.03048924,0.03537746,-0.035708863,0.037862998,-0.03280907,-0.016984494,0.03507367,-0.0070458036,0.024579188,-0.015755536,-0.023847336,-0.043634962,0.009817867,-0.0059756422,0.02568387,0.04921361,0.035708863,-0.0323672,-0.016749749,0.00503321,-0.00037628252,0.016142175,-0.02652619,0.043027386,-0.032670986,-0.016611664,0.0066004787,0.024303017,-0.009003163,-0.014057086,-0.012427679,0.01730209,-0.057553962,-0.016860219,-0.020105224,0.0047777523,-0.0061793183,-0.0013558252,-0.02107182,0.033085242,-0.028942684,-0.034410864,0.021762246,0.009562409,0.033168096,-0.041342746,0.071307264,0.013421893,-0.022356015,-0.0101354625,0.025186762,-0.017716346,0.027796576,0.020008564,0.0030741245,-0.017357325,0.026139552,0.046893775,0.011882242,0.030240687,0.0074082776,-0.018116795,0.0047087097,-0.0059238602,-0.013145722,0.004249576,-0.026001466,0.025573403,-0.00021457164,-0.049710717,0.0076706395,-0.0111227725,0.016625473,0.027686108,-0.02230078,0.045761477,-0.025656253,0.016570238,-0.017288283,-0.024510145,-0.012648616,0.02644334,-0.008899599,0.035432693,0.026015274,0.006690234,-0.0050504706,-0.0004140402,0.0025390438,-0.014278023,-0.006262169,-0.0032104838,-0.02943979,-0.021927949,0.035681248,0.015962664,0.001036503,0.024303017,-0.0029878211,-0.027948469,-0.026291445,-0.033748053,-0.038277254,0.049848802,0.0054302053,-0.008961737,0.06953977,-0.022466483,0.04808131,-0.008871982,-0.008782227,0.039160997,0.008361067,-0.053742807,0.008209173,-4.493167e-05,-0.035018437,-0.059708092,-0.0020609235,0.011599167,-0.027934661,0.035211757,0.005575195,0.0018624258,0.02333642,0.012517435,-0.0034055293,0.0046362146,-0.0030257946,0.029798813,-0.01862771,-0.021900332,0.011095156,-0.028804598,0.04750135,0.03670308,0.02823845,0.038249634,0.032505285,-0.022632185,-0.015948854,0.042778835,0.04471203,-0.051395357,-0.0036937825,0.033333797,0.030516857,0.033278562,-0.025090104,-0.008464631,-0.015769344,-0.010225218,0.017550645,-0.036647845,0.0069698566,-0.008713184,0.010356399,0.05468179,0.025518168,0.025573403,-0.00052558724,-0.0039595966,0.033361413,-0.036564995,0.0023509027,0.02257695,-0.0012237811,0.03424516,0.0027289111,-0.025145337,0.019773819,-0.0013471949,-0.01911101,-0.029108386,-0.052361954,-0.0060067116,-0.023184527,0.0555103,-0.0015767618,-9.363911e-05,-0.014374683,-0.012952403,-0.0016216395,-0.020740416,0.008775323,-0.050843015,0.019028157,0.015948854,0.012400062,-0.008278215,0.01157155,0.06219363,-0.023626398,0.018931499,0.00658667,-0.02644334,-0.007256384,-0.01806156,-0.04009998,0.0058513656,-0.022715036,-0.050843015,0.036841165,-0.020712798,-0.042834066,0.030848261,0.008506056,0.029246472,0.046810925,0.0006537477,0.015810769,-0.002566661,0.024537763,0.023957804,0.026277637,0.02239744,-0.019580498,-0.027810384,-0.0072494796,0.004432539,0.024952019,0.019525265,0.028776981,-0.011937477,-0.01645977,-0.022632185,-0.049545012,0.026360488,-0.044822495,0.0034435028,0.021693204,0.0008392999,0.0033485692,0.000751702,0.01788205,-0.026470957,-0.013677351,0.018793413,-0.050097354,0.011813199,0.019994754,0.01053591,-0.012372445,0.028307492,0.039381936,0.013898288,-0.0023992325,-0.0060999193,0.028638896,-0.02060233,-0.00482263,-0.031649157,0.010038803,-0.0034089815,0.008678663,-0.027078532,0.07241195,0.020353777,0.03686878,-0.032339584,0.022687418,-0.022797886,-0.02888745,-0.0017079428,-0.013808533,-0.024717273,0.0031345368,-0.021389417,0.019677158,0.023377845,0.014830364,-0.044353005,-0.024316825,-0.004667284,-0.026553808,-0.035598397,-0.013836149,-0.013822341,0.013414989,-0.012151509,0.016114557,-0.022991206,0.04714233,-0.019787626,0.032311965,-0.011136581,0.012910978,-0.0130904885,-0.018793413,-0.028183214,0.0577749,0.030737793,-0.03272622,-0.0050884443,0.04658999,0.012952403,0.026843786,-0.02729947,0.0267057,0.02756183,0.0018572476,0.008941025,0.04440824,0.010107846,0.008292024,0.037310656,-0.0055579343,-0.005806488,0.009665973,0.028017512,-0.04128751,-0.04487773,0.0070078303,-0.005495796,-0.028749365,0.023281185,0.046921395,-0.00065676833,0.027699916,0.020174265,0.0041183946,-0.008989355,-0.0064140633,-0.017357325,-0.0151617685,-0.012496722,-0.04863365,-0.032615755,-0.027589448,0.017730156,0.012386253,-0.013698064,-0.0016958604,0.013546171,-0.0021713916,0.0036730696,0.014250405,0.014982258,-0.014485151,0.015286045,-0.007052708,-0.019829053,0.019787626,0.021596545,-0.030599708,-0.0020022371,0.018613901,0.0047259703,-0.009189579,0.0097212065,-0.04090087,-0.014457533,-0.023308802,-0.021651778,-0.015714109,-0.01937337,-0.02004999,-0.014844173,8.7436056e-05,-0.0058479137,0.03639929,0.014568002,-0.03300239,-0.018006327,0.008057279,0.04299977,0.004715614,0.0028600923,-0.027506597,0.035653632,-0.0042116023,0.009590026,0.021375608,-0.058492944,0.011129677,0.011930572,-0.044905346,-0.0107568465,-0.03510129,0.023543548,-0.014153746,0.061475586,0.044932965,-0.0051229657,0.028072746,0.05100872,0.0044981292,0.01420898,0.037531592,-0.013539266,0.027133767,0.017260665,-0.018489625,-0.016225025,-0.02013284,0.03606789,0.0013868945,-0.03076541,-0.0067868936,0.028997919,0.012406967,0.0009571039,-0.006817963,-0.027119957,0.030931113,-0.00559936,0.035626013,-0.016404536,-0.03659261,0.06843509,0.013994948,0.012061753,0.003604027,0.011495603,0.008195364,0.01741256,0.019249095,-0.02775515,0.030268302,0.022742653,-0.008720088,-0.005250694,0.0017243405,-0.031428218,-0.00024682752,-0.0019504552,0.0062380047,0.0073185223,0.026954256,0.00202295,0.035819333,-0.0060101636,0.014609427,0.024662038,-0.0173159,0.007546363,-0.016722133,0.013442607,-0.010570431,0.0031535237,-0.0061240843,-0.008202268,0.0043151663,-0.0014913215,-0.011233241,-0.002205913,-0.0093069505,0.028307492,0.027271852,-0.012579573,0.00409423,0.014650852,0.0065556006,0.0019832505,0.007339235,-0.009652164,0.0123655405,-0.004850247,0.0069940216,-0.04421492,-0.0065452443,0.0024061368,0.0059514777,0.002150679,0.042281725,0.020616138,0.025159147,0.010052612,0.0068248673,-0.028045129,0.02257695,-0.0024596448,0.026912829,-0.014153746,-0.019428605,0.0051540346,-0.00799514,0.012531243,-0.00073012616,0.020478053,-0.015355088,0.0047018053,0.0024337538,0.010259739,-0.008568195,-0.022963589,0.009631451,0.0007931276,-0.049075525,0.035543162,-0.01947003,0.033803288,0.009168865,-0.0047052572,-0.017094962,0.019400988,-0.031345367,0.024537763,-0.00508154,0.0041839853,1.4799672e-06,-0.019331945,-0.04117704,0.032947157,-0.0013644556,0.011316093,0.054460853,-0.017233048,0.0005281764,-0.018655328,0.008229885,-0.0064416802,0.030986346,0.027064724,0.0005648553,0.0145956185,0.016211217,0.0037697293,-0.020657564,0.010432346,-0.021748438,-0.0026546903,-0.0060274242,-0.010577336,0.031262517,-0.01608694,0.03407946,-0.011405848,0.024496337,0.011095156,0.013318329,-0.025338657,0.012103179,-0.0016829149,0.014105416,0.024952019,0.020105224,-0.011550837,0.041618917,-0.02210746,-0.01231721,-0.0016406262,-0.019898096,-0.047280416,0.023502123,-0.035349842,-0.010094037,-0.0010977783,-0.019041967,-0.021803673,0.00080779917,0.023281185,0.0044532516,-0.0047121616,-0.001218603,0.0021852003,-0.019980947,-0.01749541,-0.012848839,0.012503626,-0.03189771,-0.016956877,-0.009251717,0.037117336,0.012952403,0.018696753,0.0007460923,-0.008195364,-0.0031051936,-0.018130602,0.000596356,0.00059204083,-0.00070121454,-0.0019901546,0.02464823,0.030185452,-0.02004999,-0.019842861,-0.019552883,-0.011336805,0.018475816,-0.03830487,0.019773819,-0.028114172,-0.028638896,-0.0008777048,0.010370208,0.016998304,0.004826082,-0.017840624,0.00435314,0.008519865,-0.036813546,-0.01626645,0.045623392,-0.0009968034,-0.007801821,-0.017605878,0.013339043,-0.019249095,0.008623429,-0.0068628406,0.029743578,0.025462933,0.0030309728,-0.0006244046,0.023101674,0.009300047,-0.0048329863,0.0043945652,0.008057279,-0.010777559,0.00014401868,-0.014291831,-0.00818846,0.0025097008,0.006869745,0.015645068,0.0029602041,-0.011592263,0.0048813163,0.009375993,-0.025103912,0.016680706,-0.023046441,-0.01458181,-0.0025718391,0.025531976,0.01948384,-0.015603642,-0.0023388201,0.025476743,0.011412752,0.012627902,0.025062487,-0.023557356,-0.015272236,-0.008526769,0.052002933,-0.017274475,-0.0010149272,-0.020436628,0.007967523,0.024952019,0.0013592774,-0.0013635926,-0.03245005,-0.035515547,-0.005626977,0.0060343286,-0.01561745,0.015355088,0.0028946137,0.004950359,-0.0037213995,-0.022162694,-0.0026115386,-0.020063797,-0.022176502,-0.017992517,0.00077672995,-0.05070493,-0.033665203,-0.027078532,-0.01124705,0.016639281,-0.006210387,0.017757773,-0.0008392999,0.0055820993,0.0031207283,0.02409589,0.014650852,-0.0010037076,-0.027976086,0.0062656216,-0.0007335783,-0.0040148306,-0.023888761,0.007532554,-0.0049400027,-0.012683137,-0.03209103,0.0012358637,0.035349842,0.027409937,0.0038871018,0.03181486,-0.00814013,-0.009955952,0.0038318678,0.0010753395,0.0061862227,-0.02333642,0.0043186187,0.023792101,0.0065521486,-0.013981139,-0.014692279,-0.010466867,0.031842474,0.012627902,0.0019003992,0.014733704,0.018475816,0.0151617685,0.0024510145,0.022314588,0.034024224,0.018738179,-0.011364422,0.0016898192,-0.026636658,-0.0025597566,0.02042282,-0.033140477,-0.021665588,-0.00054586853,0.039464787,0.034300394,0.023861144,-0.005782323,0.00070639275,-0.0005519098,-0.027838001,0.02671951,-0.031372987,-0.019318137,-0.0029256828,0.021651778,0.025863381,0.010411633,0.0013756751,0.009231004,0.002024676,-0.001219466,0.0013074954,0.00710449,0.03225673,-0.00627943,0.00043777362,0.013484032,0.02511772,0.013684256,-0.023198335,0.0011184912,-0.0071942452,0.010459963,-0.005267955,-0.010522102,-0.037614442,-0.033582352,-0.003683426,-0.0044497997,0.0131940525,0.0032122098,-0.0074220863,0.03388614,-0.011889147,0.0039250753,-0.0050677313,-0.013490936,0.017094962,-0.013428798,0.00030357196,-0.0070975856,-0.011820104,0.025531976,0.037227802,-0.025960041,-0.023874953,0.00042353358,0.056007408,-0.017951092,-0.02578053,0.004767396,0.007974427,-0.0009795427,0.0019262902,-0.0370621,-0.031952944,-0.014788938,0.02785181,0.018089177,-0.008533673,-0.024510145,0.034383245,0.055731237,0.02040901,-0.021831289,0.032422435,0.012848839,0.01702592,-0.011164199,-0.037559208,-0.012565765,0.063850656,0.030157834,0.044104453,0.0052575986,0.017633496,0.0123655405,0.0030931113,-0.00078794936,-0.004567172,-0.030047366,-0.015520791,0.0011745883,0.012337924,-0.020008564,0.059984263,0.015645068,0.007933002,-0.00068438536,0.011806295,0.039437167,0.0104461545,-0.04090087,0.028970301,-0.033913754,-0.008015853,0.00020831465,0.04308262,0.021665588,-0.02419255,0.00014984416,-0.006144797,0.009500271,-0.0039492403,0.014429917,0.035626013,-0.0031587018,-0.00487096,-0.016570238,-0.04808131,-0.007159724,-0.02343308,-0.0095140785,-0.01891769,0.008630333,0.013152627,0.0066453563,-0.008340353,-0.00032169564,-0.011840817,-0.047805138,0.020491863,-0.004146012,0.006065398,0.030654943,-0.0038284156,-0.004767396,-0.027630873,0.031096814,0.004177081,-0.009003163,-0.003714495,-0.02248029,0.008181555,-0.045181517,0.02352974,0.03894006,0.024592996,-0.00082505983,0.030378772,-0.004926194,-0.055178896,-0.023792101,0.023971612,0.011861529,0.03416231,0.0066522607,-0.002021224,-0.008802939,-0.02971596,0.02833511,-0.027216617,-0.0069560483,0.020036181,-0.011302284,0.011516316,-0.013311425,-0.0019936068,-0.02446872,0.0008190186,-0.03076541,-0.02869413,0.0068904576,0.03245005,0.01645977,0.0013497841,0.023225952,-0.0015120343,-0.0057443497,0.0154241305,0.018959114,0.0063933507,-0.027037106,-0.008575099,0.01702592,0.0143884905,0.024068272,-0.041508447,0.0032104838,-0.008802939,0.024910592,0.011467986,0.030461622,0.0029239568,-0.009134344,-0.003918171,0.018199645,0.0065797656,-0.00057521166,0.029384557,-0.027437555,-0.019718584,-0.014291831,0.0039285272,-0.005733993,-0.013118106,0.032229114,0.0009898992,-0.0053887796,-0.0044774166,0.01420898,-0.015106535,-0.009686685,0.012938594,-0.0030827548,-0.02417874,0.03488035,0.0028635445,0.030157834,0.01739875,0.014899407,-0.009092919,0.008927216,-0.031262517,0.017177815,-0.012351732,0.008823652,0.011944381,0.008098704,0.0039561447,0.0020937186,0.0017761225,0.02107182,-0.005261051,0.0039768573,0.019911904,-0.025628636,0.008098704,-0.0069146226,-0.026305255,-0.0038491285,0.0027910497,0.0111227725,0.00021187466,-0.008816748,-0.017329708,-0.0027444458,-0.006324308,-0.021720821,0.021679396,-0.009555505,-0.0013092215,0.045954797,0.028003704,0.0008021894,0.005267955,-0.013760203,-0.0055130566,0.0020143196,-0.01825488,-0.02173463,-0.008002045,0.0071873413,0.053659957,0.0039354316,-0.020823266,0.008844365,0.005623525,-0.0047397786,0.016252642,-0.010577336,-0.023170717,0.014871789,0.029881664,0.0031241805,0.020795649,0.0024941661,0.0045533637,0.0056718546,-0.005468179,-0.008947929,-0.00023927598,-0.0060101636,-0.032063413,0.014457533,0.0015439665,-0.00078794936,-0.011937477,0.0062552653,-0.023985421,0.020022372,0.00077931903,0.017564453,0.015313663,-0.009755728,-0.009003163,-0.0056131682,-0.031842474,0.0014628414,0.0019314685,0.006013616,0.018199645,-0.033582352,0.016059322,0.013698064,0.006044685,-0.0062172916,-0.014871789,-0.012814318,-0.031428218,0.007442799,-0.0057236366,0.0024855358,0.027396128,-0.00762231,0.024882976,-0.023198335,-0.00066237804,0.019331945,-0.020036181,-0.047943223,-0.031041581,0.0011443822,-0.0076568313,-0.0020522932,-0.016211217,-0.030019749,0.008243694,0.00034672362,0.0053300937,-0.0012781522,-0.0034866545,-0.002154131,0.025725296,-0.0018831386,0.0048882207,-0.0044912254,-0.0092241,0.020975161,0.008326545,-0.025559593,-0.013470223,-0.009058397,-0.01072923,-0.0001625739,0.021845099,0.0022594212,0.015037492,0.013200957,0.02833511,0.019870479,0.008982451,0.0018589736,-0.013822341,-0.033168096,-0.005706376,-0.005105705,0.0021299662,-0.017578261,0.008333449,-0.00069344725,0.00061922637,-0.014250405,0.011212529,0.010018091,0.022093652,0.03642691,-0.0052472423,0.039961893,-0.023750676,0.005654594,-0.016570238,0.0017182992,-0.011295379,-0.008119417,0.0024544667,0.003966501,-0.02126514,0.008761514,0.008243694,-0.039299082,0.0043496876,-0.0059031476,0.010384017,-0.011730349,-0.0034348725,-0.039602872,0.0061517013,0.024800124,0.0036247398,0.021196097,0.024344442,0.022231737,-0.012296498,0.018116795,-0.013925905,-0.0051781996,-0.0030672203,-0.022935972,0.016294068,-0.039492402,0.0041391077,0.011992711,0.0007728463,0.027271852,-0.027271852,-0.021430843,-0.01713639,-0.0048157256,-0.0059549296,-0.0053991363,0.015520791,0.012110083,0.0050159493,0.021140862,0.020478053,0.016722133,0.0109639745,0.006976761,0.014664661,-0.02916362,0.0037213995,-0.037006866,0.027327085,-0.024979634,-0.020022372,-0.011930572,-0.011923668,0.018572476,0.002929135,-0.020560905,0.0064900103,0.019608116,0.004201246,0.0071182987,-0.009638356,0.019180052,-0.0035073673,-0.009838579,-0.003869841,-0.008802939,-0.010853507,-0.016722133,-0.0019124817,0.031372987,-0.014498959,0.02126514,0.00158194,0.027893236,0.02221793,-0.0073737563,-0.012344828,0.0016492566,-0.0040528043,-0.00851296,0.012696945,0.0042944537,0.011136581,0.017716346,0.011419657,-0.010024995,-0.003060316,0.018130602,0.009638356,-0.0042461236,-0.008554386,-0.0063174036,-0.00025545785,-0.012800509,0.0007353044,0.015810769,0.0060308767,-0.0066177393,-0.03990666,0.00435314,0.005882435,-0.0023388201,0.0064382283,-0.008347258,0.014899407,0.011012305,-0.0033226782,0.021568928,-0.048026077,0.016887834,-0.020781841,0.0020781842,-0.023667825,-0.009583121,0.03115205,-0.01600409,-0.0044774166,0.0016501197,0.00039462195,-0.021472268,-0.023571165,-0.00974192,0.00021262982,0.0027202808,0.025324848,-0.010404729,-0.02756183,0.00034327147,0.020961352,0.006921527,0.006738564,0.011626785,-0.038829595,-7.470632e-05,-0.006869745,-0.021568928,0.013946618,0.012938594,-0.006849032,-0.00016634967,0.0070699686,-0.011682019,-0.016846409,0.017012112,0.013311425,-0.002204187,0.031345367,-0.0058030356,-0.014940832,0.0066798776,0.027934661,0.01703973,-0.011530125,0.0042323153,-0.0161836,0.012814318,0.0076568313,-0.0054612746,-0.03518414,0.023184527,0.013932809,0.027920853,0.02521438,-0.008588907,-0.01966335,-0.018503433,-0.020215692,0.006251813,0.0032467311,0.056532133,-0.021845099,-0.01843439,0.0012272333,-0.0047639436,0.00012621861,0.0082160765,0.0018399869,-0.0135945,-0.008050375,-0.0071735326,0.012372445,0.008982451,0.019442413,-0.047473736,-0.01218603,0.021113247,0.032063413,0.007498033,0.006486558,0.011516316,0.030710176,0.047722287,0.013932809,0.015037492,0.01458181,0.021610353,0.016749749,0.017467793,0.0018227262,-0.0040562563,-0.010183793,0.01721924,-0.015313663,0.019732393,0.01105373,-0.009659069,-0.031732008,0.0035971226,-0.03847057,0.020809459,-0.04346926,0.023943996,0.009810963,0.024841549,-0.0070458036,0.011426561,-0.0050711837,-0.013967331,0.012393158,0.010577336,-0.03662023,-0.014485151,-0.0077120652,0.0065521486,-0.030848261,0.010107846,-0.017799199,0.0048329863,-0.009341472,-0.03029592,-0.023847336,0.013829245,0.023281185,-0.020919926,-0.024013039,0.018323923,0.021292757,-0.030848261,-0.012337924,-0.0046776403,-0.0058513656,-0.009168865,0.012406967,0.014498959,0.014485151,0.020174265,0.006873197,-0.0044532516,-0.0033226782,-0.010798273,0.0070975856,0.01467847,-0.018379157,-0.0018020135,-0.0028721748,-0.008243694,-0.015562216,0.016804984,-0.019580498,0.015465557,0.0073806606,0.004408374,-0.010846602,-0.021845099,-0.027409937,-0.010287357,0.00637609,-0.016860219,0.018047752,-0.0010459963,-0.022231737,-0.012482913,0.01124705,-0.009624547,0.0063588293,-0.02108563,0.008278215,-0.03256052,-0.010577336,-0.0323672,0.018945307,-0.0006166373,-0.0072425753,0.011875338,0.007705161,-0.034769885,0.016017897,-0.010411633,0.021223715,-0.00068567996,-0.025739104,0.018102987,0.019083392,0.019041967,-0.00013840896,-0.026609043,-0.008388683,-0.013345947,0.0055648386,0.00715282,-0.031952944,-0.0076430226,-0.012848839,-0.0055165086,-0.003552245,0.018503433,-0.013055967,-0.011612976,-0.0025580307,0.036371674,-0.008947929,0.0041045863,0.0025701132,-0.0059721903,-0.009852388,-0.008222981,0.0094105145,-0.025960041,-0.016432153,-0.0019590855,-0.0014490329,0.048606034,-0.012620999,-0.027506597,-0.023833526,0.0130904885,-0.014043277,-0.015686493,0.007988236,-0.016432153,0.0021075273,0.014927023,0.016073132,-0.013566883,0.012393158,-0.011060635,-0.006638452,0.0056166206,0.006479654,0.0066488083,0.0020626495,0.023957804,0.031096814,0.0008539714,0.022135077,-0.003838772,-0.0044014696,0.025062487,-0.0062172916,0.0010477224,-0.018862456,-0.008823652,-0.0017916571,0.03427278,0.012116987,-0.010100941,-0.0008608757,0.002385424,-0.0024561926,-0.007491129,0.0037317558,0.008533673,0.026194787,0.00097350153,-0.0056856633,-0.0034711198,0.0031414411,0.020491863,-0.007470416,-0.0068801013,0.0032864306,-0.010570431,-0.017702539,0.0066453563,0.024758698,0.008285119,-0.0043117143,-0.013028351,-0.0064244196,0.012144605,0.0045706243,0.019083392,0.010100941,-0.00870628,0.013428798,-0.0015992007,0.021707013,0.01608694,-0.008934121,-0.0025528525,-0.017205432,0.022894546,-0.008050375,-0.0060205203,-0.0014171007,0.022052227,0.012669329,-0.030019749,-0.023350228,0.012959308,0.0026840335,0.029992132,-0.017481603,0.00022633048,-0.006842128,0.012862648,-0.019497648,0.00710449,0.017992517,0.021127054,-0.0021731178,0.014719895,0.02040901,0.0139190005,-0.0016380372,0.019235285,-0.0015733097,-0.009583121,-0.018655328,-0.022356015,-0.013670447,0.009679781,0.0076568313,6.920448e-05,-0.0046776403,0.019262902,0.015134151,0.008195364,-0.0115370285,-0.0059687383,-0.020850884,0.029909281,-0.006531436,-0.009010067,0.0073461393,0.0120548485,-0.0042185066,-0.00503321,-0.0030188905,-0.023308802,0.018696753,-0.0072425753,-0.009010067,0.015299854,-0.0046879966,0.0048847683,0.0063415687,0.009997377,-0.004070065,-0.020947544,0.01901435,-0.0016880931,0.0032260183,-0.01608694,0.008865078,0.014429917,4.0265895e-05,-0.012413871,0.02202461,0.005630429,0.016570238,-0.025711488,0.023502123,-0.01665309,-0.009624547,0.01843439,0.0060515893,-0.015714109,0.0019142078,0.014692279,0.00903078,0.015368897,0.013732585,0.019166242,0.0037766336,-0.010045707,0.002671951,-0.008443917,-0.0018468912,0.008416301,-0.018586285,-0.0019521812,0.00062699366,-0.01628026,0.028031321,-0.019318137,-0.013166436,-0.04101134,-0.012959308,0.00055061525,-0.007518746,0.018710561,0.014181362,0.015299854,0.009665973,-0.011944381,-0.0052265297,-0.0038491285,-0.020036181,-0.02841796,-0.012924787,-0.015396514,0.02833511,0.010687804,-0.0006373501,0.012351732,-0.01485798,-0.0008949655,0.007850151,-0.0027513502,-0.014443725,0.025877189,0.010466867,-0.018379157,-0.025849573,-0.02014665,-0.014291831,0.015700301,0.0004000159,0.009583121,0.0005687389,0.0016751476,0.0020695538,-0.023902569,-0.029743578,0.026125744,0.011178007,-0.009272429,-0.0054509183,0.012144605,-0.008250598,-0.011965093,0.00540604,0.002879079,-0.009092919,0.0047535873,0.022839313,0.0094105145,0.011336805,2.0483556e-05,-0.0035936707,-0.00461205,-0.020201882,0.0019797983,-0.011343709,0.01966335,-0.0048157256,0.0042599323,0.029467408,0.0069422396,0.013843054,0.021679396,0.009341472,-0.0060205203,0.016818792,-0.0015689945,0.03537746,0.021748438,0.005678759,-0.0148027465,0.0050642793,-0.011495603,0.006666069,-0.013187149,-0.00529212,-0.006666069,-8.7921515e-05,-0.018144412,-0.015451748,-0.024233975,0.0014309091,-0.016404536,-0.0018969472,0.015313663,0.022176502,0.025752913,-0.015120343,0.0116889225,-0.012310307,0.0007646475,0.01485798,0.0048157256,-0.007877768,-0.038360104,-0.0061240843,0.0057098283,0.009776441,-0.0052196253,-0.02558721,0.0021385965,-0.011675114,0.012772893,0.0023526286,-0.0069180746,0.0027841453,0.013242383,-0.017854432,0.009106727,-0.01364283,-0.00012147193,-0.0077672997,-0.008340353,-0.015465557,0.0040079267,0.008796035,0.015534599,-0.007801821,-0.0060481373,-0.008492247,-0.0030188905,0.015714109,0.024772506,-0.004663832,0.016404536,-0.016639281,0.015548407,-0.03170439,0.010957071,-0.0071873413,0.009279334,0.008119417,-0.017868241,-2.5917969e-05,0.010888028,-0.013974234,-0.028445577,-0.028086554,-0.029992132,0.0022231736,0.0033485692,0.010273548,0.0130904885,-0.014761321,0.02463442,-0.022356015,0.007263288,0.009044589,-0.016252642,-0.0033934468,0.0055372217,0.00033162054,0.016404536,-0.017150197,-0.013490936,-0.012344828,-0.012980021,0.0152170025,-0.012510531,-0.0008742527,-0.005312833,0.008782227,0.012993829,0.009990473,-0.0075601717,-0.022010801,-0.0077949166,0.009700494,0.0010304617,-0.00048157256,-0.009686685,0.011985806,0.0078570545,-0.015106535,-0.028058939,0.0021403225,-0.013159531,-0.016031707,0.013166436,-0.01741256,0.00058211596,0.0057650623,0.0032760743,-0.009831675,0.0038871018,0.017012112,0.027617065,0.0074013732,-0.0054923436,-0.010480676,0.0110675385,-0.008257503,-0.020947544,-0.016349303,-0.008927216,-0.0014645675,0.018834839,0.012862648,-0.01825488,0.0034435028,-0.0003799504,-0.014554193,-0.0061620576,-0.008492247,-0.024924401,-0.0022680515,-0.012441488,0.019870479,0.011502507,-0.02869413,-0.0077120652,-0.029467408,-0.022286972,-0.014830364,0.015037492,0.022728844,-0.025960041,0.01721924,-0.021665588,0.020560905,-0.009520983,0.01011475,0.015935047,0.019428605,0.0008021894,-0.022590758,0.015299854,-0.01655643,-0.025186762,-0.032339584,-0.016238835,-0.003446955,-0.0063346643,0.014360874,0.012241264,0.016735941,-0.017426368,0.024330635,0.021582736,0.013677351,-0.019980947,-0.0019435509,-0.029025536,0.0054888916,-0.0052023646,0.0020868145,-0.018047752,-0.007442799,0.028114172,0.0016406262,-0.029191237,0.020975161,0.012690041,-0.0110192085,0.001971168,0.021278948,0.027672298,-0.0028393795,-0.016045514,0.0039354316,0.014084703,0.0006559053,-0.010169984,-0.015783152,0.013684256,0.022010801,0.0058686263,-0.020174265,-0.013629021,-0.038056314,-0.03076541,0.007263288,0.01110206,-0.00084922474,-0.03209103,0.0010201053,0.004722518,-0.020478053,-0.009217195,0.0042150547,-0.004356592,-0.011592263,0.01608694,0.011896051,-0.012206743,0.008250598,-0.010784464,0.013704969,-0.0068007023,-0.008174651,-0.008540577,0.0040631606,0.013249286,-0.014167555,0.013159531,-0.00020000795,3.7656569e-06,-0.028804598,0.0035194496,-0.0041287513,0.025890999,0.018586285,0.007038899,-0.008450822,-0.016155982,-0.0012634807,-0.0048675076,0.011612976,-0.0010692982,-0.014844173,-0.0036489046,0.004042448,0.006521079,-0.012765988,0.0076085012,0.009465749,-0.017909667,-0.003320952,0.008181555,-0.023971612,-0.003818059,0.005475083,-0.017274475,-0.022466483,0.0051954603,0.013138819,0.023391655,0.013511649,-0.013470223,0.0010762025,0.007926097,0.016611664,1.8103472e-06,0.002722007,-0.00073228375,-0.0066695213,0.02341927,-0.0041839853,-0.0013610035,-4.4446213e-05,-0.0013023173,0.025449125,-0.015134151,-0.0138154365,-0.025103912,-0.01628026,0.023971612,0.010784464,0.007836342,0.0007478183,-0.011039922,0.013214765,-0.007725874,0.00435314,0.0045291986,0.0038560326,-0.016984494,0.011191815,-0.017536836,0.0040010223,-0.035736483,0.019055774,-0.0028445576,0.0024285757,0.00023517657,0.01115039,-0.025462933,-0.0041183946,-0.010570431,-0.014982258,-0.0018330826,0.004618954,-0.0064520366,-0.019414797,0.029329322,-0.0044912254,0.011233241,0.008257503,0.0060239723,-0.008947929,0.00043820514,-0.01275218,-0.019815244,0.015645068,-0.0154241305,-0.010770655,0.0056925677,0.016611664,0.02098897,-0.01872437,-0.025352465,-0.019967139,0.022328397,-0.0029722867,0.0017450533,0.026319062,-0.013014542,-0.016708324,-0.013283808,-0.017564453,0.015727919,-0.0060032597,0.0036143833,-0.014996066,0.006842128,0.007829438,0.0032639918,-0.012116987,-0.009900718,0.02060233,-0.0025649348,0.0020453888,-0.007132107,-0.0038732933,-0.0056407857,0.0067592766,0.011875338,0.0014533481,0.036730696,0.008312737,0.013946618,-0.0115853585,-0.005157487,-0.0017709443,-0.028017512,-0.03057209,0.005185104,0.0028117625,-0.008526769,-0.011191815,0.0018399869,0.0041183946,0.019815244,0.00086260174,0.012220551,0.0034400506,0.0045844326,-0.0042944537,-0.0020177718,-0.003293335,-0.0013100845,0.0038491285,0.004456704,0.0020453888,0.0076154056,-0.006973309,-0.01373949,0.00742899,0.018406773,0.0045740763,-0.008664854,0.0017709443,-0.016418345,-0.013587596,0.008298928,0.004384209,0.005837557,0.016169792,0.004042448,0.0014818282,0.007946811,-0.00555103,0.000674029,0.03686878,-0.0051747477,0.0037490164,0.025269615,-0.0054854397,0.012248169,0.0066453563,0.01561745,0.0070837773,-0.0026149908,-0.0035418887,0.0090998225,0.010604952,0.023916379,-0.0053784233,0.001608694,0.0045706243,0.015355088,0.0011538755,0.0010770655,0.01636311,0.009189579,0.0012781522,-0.0056062643,0.007919193,0.02456538,-0.0017726703,-0.0021575831,-0.02662285,-0.006610835,0.0077465866,-0.031041581,0.025794338,0.0019832505,-0.0015327471,-0.016597856,0.03443848,-0.0040079267,0.0062311003,-4.247742e-05,0.016211217,-0.025021061,-0.006141345,-0.0005217036,-0.03245005,-0.0011383409,0.023985421,0.014222789,0.008899599,0.01161988,0.015203194,0.013953522,0.00023560808,-0.010894932,0.004280645,-0.018696753,-0.022908356,0.02567006,0.012579573,-0.0143884905,0.007132107,0.004152916,-0.023391655,0.0076154056,-0.012524338,0.014236597,0.0012332746,-0.0072287666,-0.00042094447,0.03228435,-0.013780915,-0.0008444781,0.011295379,-0.015631258,-0.008941025,-0.014637045,0.025518168,0.024164932,-0.010301165,0.021430843,-0.009797154,-0.009431228,0.008699375,0.008519865,0.028583663,-0.0063346643,-0.013387372,-0.0042150547,-0.018227262,-0.0046293107,0.0014956367,0.0048916726,-0.014153746,0.011799391,0.010459963,-0.016017897,-0.0029619301,0.02370925,-0.013408085,0.0011953011,0.008119417,0.015175577,0.010694709,-0.0006559053,-0.0012867826,-3.2296323e-06,-0.010349495,0.016832601,-0.024882976,-0.009873101,0.006572861,-0.025725296,-0.0007460923,-0.0002889004,0.0106532825,0.0008190186,-0.001115902,0.028776981,-0.006196579,-0.010874219,0.008416301,0.002592552,0.016045514,-0.009044589,-0.0028186666,-0.0042702886,0.009748824,0.009886909,-0.00959693,0.0114334645,0.00482263,0.019580498,-0.0013368386,-0.010045707,-0.022314588,0.018406773,0.0052334336,0.0018399869,-0.01956669,0.0063588293,-0.007311618,0.009665973,-0.009949048,-0.0010321878,-0.011467986,-0.0018762343,-0.017440176,0.021430843,0.024896784,0.0012488092,0.0023146553,0.0030033558,-0.002696116,-0.018613901,0.017757773,-0.013104297,0.0038215113,-0.012482913,-0.029301705,0.009935239,-0.014050182,0.0039837616,-0.015962664,0.013760203,0.0029602041,0.0015405144,-0.004328975,-0.0083748745,0.01835154,-0.001426594,-0.0016449414,-0.010777559,-0.008292024,0.013249286,0.0045464593,0.013470223,-0.007090681,0.017177815,0.0017053537,0.035902184,0.01920767,0.01966335,0.0048675076,-0.012455296,-0.008464631,-0.020616138,0.0143332565,0.009672877,-0.018558668,-0.005447466,0.010473772,0.011095156,0.02210746,-0.014982258,0.0024820836,-0.0055890037,0.018890072,-0.006690234,-0.0013592774,-0.012807414,0.015092726,0.00917577,0.0063622813,0.014471342,-0.012420774,0.015465557,0.0025890998,-0.018972924,-0.0014706088,-0.009686685,0.002383698,0.0072770966,-0.017826816,-0.016169792,0.020270925,-0.015106535,0.010798273,-0.019621925,-0.010763751,-0.012683137,0.021941759,0.0064106113,-0.004981428,0.016321685,0.017661113,-0.013311425,-0.016501196,-0.0012876457,0.022231737,0.0150098745,-0.0044394433,-0.011578455,-0.019911904,0.011295379,-0.010625666,0.0058410093,0.0061827702,0.013635926,-0.011074443,-0.011702731,0.0043255226,-0.012455296,-0.010363303,-0.032339584,-0.0014498959,-0.014485151,-0.0011262584,0.009790249,0.0008410259,0.01260719,0.0143332565,-0.0077327783,-0.015506982,-0.008637237,0.018517243,-0.0015361992,0.006534888,0.016584048,-0.025794338,-0.013808533,-0.010625666,-0.0027651587,0.010404729,0.011875338,-0.013794724,0.019980947,-0.013207861,0.020395203,0.019055774,0.0006835224,0.005889339,0.0004295748,0.008540577,-0.0033744602,-0.02654,0.005651142,0.011695827,0.0054267533,0.000110899775,-0.0054094926,-0.014664661,-0.0010692982,0.0058444613,0.004639667,-0.0017614509,0.026484765,0.018793413,-0.0037524686,0.028583663,-0.028859833,-0.036261205,0.013967331,0.0025649348,0.0024320278,-0.020919926,0.0029429435,-0.012821223,-0.018793413,0.012772893,0.008029661,-0.0024941661,0.0052230773,-0.0009225826,0.01029426,-0.003446955,0.037200186,0.01694307,-0.008947929,-0.015921237,0.0073806606,0.0024682751,0.013263095,-0.022756461,0.0054025883,-0.03272622,-0.0037110432,-0.011488699,0.015838386,-0.009479557,0.00158194,-0.010459963,0.007387565,0.0019159339,0.0082713105,0.009065301,0.02971596,-0.018462008,-0.014264214,0.020906119,0.015382705,-0.007284001,-0.0024147672,-0.0060239723,0.02145846,-0.001712258,0.01920767,-0.0072978092,0.006973309,0.0037938943,0.0039803092,0.015493173,0.017329708,-0.01223436,-0.025324848,-0.0062172916,0.003295061,0.0016147352,-0.012869552,-0.017246857,0.008802939,-0.0019418249,-0.0006628095,-0.01411232,-0.006817963,0.00088288303,0.010604952,-0.003862937,-0.011233241,0.0010926002,0.030378772,0.01430564,0.0011193542,-0.0012824674,0.005302476,-0.021154672,0.006041233,-0.0009156783,-0.00856129,0.016211217,0.02050567,0.008437013,-0.015493173,0.0051229657,0.006331212,-0.03877436,0.011813199,0.0053508063,0.0018244523,-0.018986732,0.0036903303,-0.0032001273,0.020436628,0.0049572634,0.0045947894,0.0010986413,0.0034107075,0.014830364,-0.008713184,0.007891576,0.015506982,0.005937669,0.00065504224,0.001712258,0.0065763136,-0.002929135,-0.016528813,0.013836149,0.014498959,0.0063898982,0.012821223,0.0034970108,0.00018824913,0.0116405925,0.0049123853,0.012172221,-0.01166821,-0.018834839,-0.013449511,-0.007601597,0.013394277,0.020919926,-0.013318329,0.0041391077,-0.03432801,-0.014029469,-0.01608694,-0.009320759,-0.014278023,-0.0037179473,0.006403707,0.009583121,0.022825504,-0.00399757,-0.0040079267,-0.036564995,0.0147475125,0.010384017,-0.03330618,3.220193e-05,-0.023543548,-0.0070319953,-0.0059204083,0.0073530436,-0.0073737563,-0.008782227,0.011074443,0.014443725,0.030378772,-0.02927409,-0.0048571513,0.0016190504,0.028100364,0.010128559,-0.0015180756,-0.012876457,-0.014043277,0.018848646,-0.0032104838,-0.024441103,0.0141261285,0.011502507,0.018903881,-0.008871982,0.006676425,0.012634807,0.004798465,-0.009272429,0.030351155,-0.0034883805,-0.013629021,0.003217388,-0.016818792,-0.0018606997,-0.008651045,-0.018696753,0.010556623,0.00044187304,0.009679781,-0.018213455,-0.010784464,-0.025172954,0.030130217,-0.020063797,0.0055959076,0.010252835,-0.00082376524,0.010453059,0.006224196,0.007325426,-0.0008949655,0.02212127,0.019815244,0.0067489203,-0.017785389,0.004125299,-0.00091999344,0.0033675558,-0.011191815,0.0022991206,0.0042219586,-0.008285119,0.011592263,0.015796961,0.004228863,-0.004225411,-0.013408085,9.3248045e-06,-0.0045533637,0.016956877,0.006303595,-0.011412752,-0.007470416,-0.0008004634,-0.027713725,-0.016901644,-0.010508293,0.0141261285,0.002723733,-0.0081125125,0.02323976,-0.013083585,0.006521079,-0.008395588,0.013518553,-0.0018917689,0.0072978092,0.0145956185,-0.007491129,0.0067074946,0.0068524843,0.0033934468,0.010639474,0.019138627,-0.0062172916,-0.00079355907,0.0048433426,0.0024924402,-0.013428798,0.011461082,-0.009541696,-0.0029153265,0.034107074,0.0021886523,0.0060239723,0.0011374778,0.011757965,-0.008913408,-0.0068801013,0.014788938,-0.010604952,0.012192934,-0.0055648386,-0.0035936707,-0.026829978,0.018199645,0.024979634,0.0033071435,0.010791368,-0.018020134,0.009362185,-0.008506056,-0.011875338,-0.0109639745,-0.007442799,0.0026788553,0.00096055603,-0.012241264,0.012841935,-0.01364283,0.013622117,-0.014554193,0.005354258,-0.0224941,-0.008871982,-0.0067834416,0.03791823,-0.005198912,0.013021446,0.019262902,0.014443725,-0.0011694101,-0.017674921,-0.0010166531,0.027492788,-0.006303595,0.01029426,-0.028776981,-0.008402492,0.006779989,0.019621925,-0.021223715,0.0065245316,-0.01373949,-0.027796576,0.015479364,0.010556623,0.01218603,-0.009244813,0.010970879,0.03303001,0.026139552,0.0014680196,-0.015658876,0.008720088,0.025711488,0.038995296,-0.01524462,0.0030257946,-0.0012695219,-0.051699147,-0.0019780723,-0.014692279,-0.008388683,-0.0027979538,-0.018227262,0.006790346,-0.030793028,-0.0055061523,0.010218314,-0.007981332,-0.0061378926,0.0012617547,-0.0043980177,-0.009106727,-0.016680706,-0.010080229,-0.006676425,0.00865795,-0.009873101,0.009783345,-0.0058444613,-0.021292757,0.0048606033,-0.010770655,-0.022148887,-0.016349303,0.00071027636,0.0075601717,0.0047052572,0.0101354625,-0.0032622658,0.00912744,0.003918171,0.023584973,0.0017813006,-0.015410322,0.008720088,0.004018283,0.0058237487,-0.018144412,0.008264407,-0.0033382126,0.0061931266,0.021472268,-0.003243279,0.008457726,0.02833511,0.004926194,-0.0060205203,0.0060757543,-0.0075394586,-0.019262902,-0.011751061,-0.008333449,0.0136083085,-0.00451539,-0.011440369,0.0072770966,-0.0023215595,-0.0066177393,-0.0015361992,0.0033779123,0.01514796,0.001815822,0.022853121,-0.025159147,-0.0023888762,-0.028266067,-0.01730209,-0.018655328,-0.007263288,-0.012600286,-0.0046534752,0.0037973465,0.015313663,-0.0035971226,0.00020669647,-0.008575099,-0.006251813,-0.0038042506,0.023281185,0.013663542,-0.0011193542,0.00045438702,0.023930186,0.020478053,0.010390921,0.01608694,0.009969761,0.0173159,0.013670447,-0.018392965,0.017094962,0.014457533,0.0049400027,-0.012192934,-0.0015206647,-0.01721924,-0.011675114,-0.0089962585,0.00049667567,0.007387565,-0.015866004,0.0036799738,0.0046051457,0.0036523568,-0.007159724,0.03697925,0.010425442,0.006434776,-0.0012099727,0.002306025,0.018959114,0.0060584936,-0.0083748745,0.009880005,-0.0061517013,-0.03902291,0.041674152,0.008947929,-0.022839313,-0.0020643757,-0.009362185,-0.0054509183,-0.0035384365,-0.00046560646,-0.0067040427,-0.008720088,-0.011647497,-0.02267361,0.004981428,-0.012524338,0.02221793,0.0025200571,0.011005401,0.0019936068,-0.014063991,-0.005733993,0.0047604917,0.013442607,0.014940832,-0.0015491447,0.017909667,0.009990473,0.013394277,0.0095486,0.0029912733,0.0109639745,-0.00637609,-0.005105705,-0.011592263,-0.006403707,0.0017295186,0.006248361,-0.007808725,0.0061137276,0.010370208,0.0059480253,0.011405848,0.008920312,-0.007850151,0.022190312,0.0267057,-0.003162154,-0.017288283,0.00870628,-0.0021213358,0.010570431,-0.0124691045,0.014153746,0.0044290866,-0.010183793,-0.0077742036,-0.016114557,0.0016682433,-0.0045499112,0.0032191142,0.030268302,0.0076913526,-0.014498959,-0.004770848,0.007939906,-0.012013423,-0.008802939,-0.01768873,0.014167555,-0.012993829,0.014181362,0.024206357,-0.008443917,-0.01006642,0.019939521,-0.010459963,-0.0072425753,-0.0021834741,-0.022604568,0.011965093,0.011606071,0.011944381,0.026042892,-0.008057279,0.011930572,0.013304521,0.0044394433,-0.0031794147,-0.0034849283,0.0034107075,-0.012724563,0.022825504,-0.0025390438,0.0012522613,0.0018710562,-0.017826816,-0.014816555,0.0068766493,-0.00096573425,0.010687804,-0.04233696,-0.0063346643,0.018420583,-0.005368067,-0.014512768,-0.008554386,-0.0048916726,-0.011322997,0.0016501197,-0.004770848,-0.0054094926,0.03209103,-0.012020327,0.019980947,-0.0152170025,0.024151124,0.0038560326,-0.006275978,0.0044221827,0.011295379,0.0008259228,-0.0022732296,-0.0010692982,0.0076637357,0.015382705,-0.017813006,0.011751061,-0.014788938,-0.0028393795,0.0031932232,-0.027630873,-0.0070354473,-0.011944381,-0.0053059286,-0.006945692,0.0049676197,-0.00705616,0.015976472,0.007491129,-0.0011581907,-0.00814013,0.011861529,-0.007946811,0.016874027,-0.013111201,0.017523028,0.0129869245,0.0028980658,-0.019704776,0.02456538,-0.0029843692,0.026084317,-0.0010330508,-0.01610075,0.014609427,0.0055406736,0.014133033,-0.011039922,-0.0152170025,-0.01891769,-0.008347258,-0.011965093,0.019345755,-0.007863959,0.01223436,-0.0020971708,0.018793413,-0.009348377,0.00025071116,0.0092033865,-0.010356399,0.0030223425,-0.034769885,0.0042461236,0.018365348,-0.0045291986,-0.0067005903,-0.016722133,-0.024938209,-0.01458181,0.013856863,-0.006148249,0.017067347,-0.002202461,0.0044187303,0.01265552,-0.0055924556,0.0026357037,-0.010149271,-0.017523028,0.00399757,-0.0055096042,-0.010529006,0.019304328], top_k=5)
        
        assert isinstance(results, list)
        
        print(results)
        # 데이터가 있으면 Precedent 객체여야 함
        if results:
            from src.model.schema import Precedent
            assert isinstance(results[0], Precedent)
            
    except Exception as e:
        # pgvector가 설치되어 있지 않거나 벡터 차원 불일치 등의 DB 에러는 발생할 수 있음
        # 이는 테스트 실패보다는 환경 문제로 간주할 수도 있음
        pytest.fail(f"search_precedents 실행 실패: {e}")

@pytest.mark.asyncio
async def test_save_infringe_risk_real(real_state):
    """실제 DB에 위험군 저장 (save_infringe_risk)"""
    
    if not os.getenv("DB_URL"):
        pytest.skip("DB_URL이 설정되지 않아 테스트를 건너뜁니다.")
        
    try:
        store = VectorStore()
        
        ensemble_result = real_state["ensemble_result"].model_copy()
        ensemble_result.visual_weight = Decimal(str(ensemble_result.visual_weight))
        ensemble_result.phonetic_weight = Decimal(str(ensemble_result.phonetic_weight))
        ensemble_result.conceptual_weight = Decimal(str(ensemble_result.conceptual_weight))
        
        # 테스트용 데이터 구성
        risk_data = {
            "c_tm": real_state["current_collected_trademark"],
            "ensemble_result": ensemble_result,
            "p_trademark_reg_no": real_state["protection_trademark"].p_trademark_reg_no
        }
        
        # INSERT 실행
        # 주의: 실제 DB에 데이터가 쌓이므로, 테스트 DB를 쓰거나
        # 트랜잭션 롤백을 사용하는 것이 좋지만, 현재 구조상 connection pool을 직접 제어하기 어려움
        # 여기서는 실행 에러가 없는지만 확인
        await store.save_infringe_risk(risk_data)
        
    except Exception as e:
        pytest.fail(f"save_infringe_risk 실행 실패: {e}")
